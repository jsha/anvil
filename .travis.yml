language: go

go:
  - 1.7.3

addons:
  hosts:
    - le.wtf
    - boulder
    - boulder-mysql
    - boulder-rabbitmq

sudo: required

services:
  - docker

matrix:
  fast_finish: true

# Only build pushes to the master branch, PRs, and branches beginning with
# `test-`. You should not push branches beginning with `test-` to the
# letsencrypt repository, but this is a convenient way to push branches to your
# own fork of the repostiroy to ensure Travis passes before submitting a PR.
# For instance, you might run:
# git push myremote branchname:test-branchname
branches:
  only:
    - master
    - staging
    - release
    - /^test-.*$/

env:
  global:
    - PATH=$HOME/bin:$PATH # protoc gets installed here
    - GO15VENDOREXPERIMENT=1

install:
  - ./test/travis-before-install.sh
  - docker-compose pull
  - docker pull letsencrypt/boulder-tools
  - docker-compose build

script:
  - docker-compose run boulder go run gzip.go
